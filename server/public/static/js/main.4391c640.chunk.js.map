{"version":3,"sources":["components/Button.jsx","components/DropdownLinea.js","components/ProductForm.jsx","components/ProductManager.js","hooks/useProductsInfinite.js","App.js","index.js"],"names":["Button","_ref","label","icon","onClick","disabled","React","createElement","style","padding","backgroundColor","color","border","borderRadius","cursor","fontSize","display","alignItems","gap","role","aria-label","DropdownLinea","value","onChange","options","placeholder","required","displayField","marginBottom","width","map","option","key","id","ProductForm","mode","initialData","onCancel","onSubmit","name","setName","useState","code","setCode","lineaProductivaId","setLineaProductivaId","lineaComercial1Id","setLineaComercial1Id","lineaComercial2Id","setLineaComercial2Id","lineasProductivas","setLineasProductivas","lineasComerciales","setLineasComerciales","useEffect","fetch","then","res","json","data","catch","err","console","error","e","preventDefault","trim","alert","includes","target","justifyContent","marginTop","type","ProductManager","search","setSearch","linea","setLinea","openCreateModal","setOpenCreateModal","selectedProductId","setSelectedProductId","products","loading","hasMore","lastProductRef","limit","setProducts","page","setPage","setLoading","setHasMore","observer","useRef","useCallback","node","current","disconnect","IntersectionObserver","entries","isIntersecting","prevPage","observe","encodeURIComponent","prev","length","useProductsInfinite","title","maxWidth","gridTemplateColumns","product","index","_product$crce7_precio","isLast","crce7_t_productosid","ref","boxShadow","margin","crce7_nombre_","crce7_codigo","fontWeight","crce7_precio_unitario","toFixed","textAlign","className","borderTop","height","animation","position","top","left","right","bottom","zIndex","log","App","ReactDOM","createRoot","document","getElementById","render"],"mappings":"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","file":"static/js/main.4391c640.chunk.js","sourcesContent":["import React from 'react';\n\nfunction Button({ label, icon, onClick, disabled }) {\n  return (\n    <button\n      onClick={onClick}\n      disabled={disabled}\n      style={{\n        padding: '0.5rem 1rem',\n        backgroundColor: disabled ? '#ccc' : '#007bff',\n        color: 'white',\n        border: 'none',\n        borderRadius: '8px',\n        cursor: disabled ? 'not-allowed' : 'pointer',\n        fontSize: '1rem',\n        display: 'flex',\n        alignItems: 'center',\n        gap: '0.5rem'\n      }}\n    >\n      <span role=\"img\" aria-label=\"icon\">{icon}</span>\n      {label}\n    </button>\n  );\n}\n\nexport default Button;","import React from 'react';\n\nfunction DropdownLinea({\n  label,\n  value,\n  onChange,\n  options,\n  placeholder,\n  required = false,\n  displayField = 'nombre', // por defecto usamos 'nombre'\n}) {\n  return (\n    <div style={{ marginBottom: '1rem' }}>\n      <label>{label}:</label>\n      <select\n        value={value}\n        onChange={onChange}\n        required={required}\n        style={{ width: '100%', padding: '0.5rem' }}\n      >\n        <option disabled value=\"\">\n          {placeholder}\n        </option>\n        {options.map((option) => (\n          <option key={option.id} value={option.id}>\n            {option[displayField] || '(Sin nombre)'}\n          </option>\n        ))}\n      </select>\n    </div>\n  );\n}\n\nexport default DropdownLinea;","import React, { useState, useEffect } from 'react';\nimport DropdownLinea from './DropdownLinea';\nimport Button from './Button';\n\nfunction ProductForm({ mode = 'crear', initialData = {}, onCancel, onSubmit }) {\n  const [name, setName] = useState(initialData.name || '');\n  const [code, setCode] = useState(initialData.code || '');\n  const [lineaProductivaId, setLineaProductivaId] = useState(initialData.lineaProductivaId || '');\n  const [lineaComercial1Id, setLineaComercial1Id] = useState(initialData.lineaComercial1Id || '');\n  const [lineaComercial2Id, setLineaComercial2Id] = useState(initialData.lineaComercial2Id || '');\n\n  const [lineasProductivas, setLineasProductivas] = useState([]);\n  const [lineasComerciales, setLineasComerciales] = useState([]);\n\n  useEffect(() => {\n    fetch('/api/lineasproductivas')\n      .then(res => res.json())\n      .then(data => setLineasProductivas(data))\n      .catch(err => console.error('Error cargando l√≠neas productivas', err));\n\n    fetch('/api/lineascomerciales')\n      .then(res => res.json())\n      .then(data => setLineasComerciales(data))\n      .catch(err => console.error('Error cargando l√≠neas comerciales', err));\n  }, []);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    // Validaciones b√°sicas\n    if (!name.trim() || !code.trim()) {\n      alert('Nombre y c√≥digo son obligatorios');\n      return;\n    }\n\n    // Validaci√≥n espec√≠fica para referencia\n    if (mode === 'referencia' && !code.includes('-')) {\n      alert('El c√≥digo de la referencia debe incluir un guion (ej: 123-1)');\n      return;\n    }\n\n    const productData = {\n      name,\n      code,\n      lineaProductivaId,\n      lineaComercial1Id,\n      lineaComercial2Id\n    };\n\n    onSubmit(productData);\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <div style={{ marginBottom: '1rem' }}>\n        <label>Nombre:</label>\n        <input value={name} onChange={e => setName(e.target.value)} style={{ width: '100%', padding: '0.5rem' }} />\n      </div>\n\n      <div style={{ marginBottom: '1rem' }}>\n        <label>C√≥digo:</label>\n        <input value={code} onChange={e => setCode(e.target.value)} style={{ width: '100%', padding: '0.5rem' }} />\n      </div>\n\n      <DropdownLinea\n        label=\"L√≠nea Productiva\"\n        value={lineaProductivaId}\n        onChange={(e) => setLineaProductivaId(e.target.value)}\n        options={lineasProductivas}\n        placeholder=\"Selecciona una l√≠nea productiva\"\n        required\n        displayField=\"nombre\"\n      />\n\n      <DropdownLinea\n        label=\"L√≠nea Comercial 1\"\n        value={lineaComercial1Id}\n        onChange={(e) => setLineaComercial1Id(e.target.value)}\n        options={lineasComerciales}\n        placeholder=\"Selecciona una l√≠nea comercial\"\n        displayField=\"nombre\"\n      />\n\n      <DropdownLinea\n        label=\"L√≠nea Comercial 2\"\n        value={lineaComercial2Id}\n        onChange={(e) => setLineaComercial2Id(e.target.value)}\n        options={lineasComerciales}\n        placeholder=\"Selecciona una l√≠nea comercial\"\n        displayField=\"nombre\"\n      />\n\n      <div style={{ display: 'flex', justifyContent: 'flex-end', gap: '1rem', marginTop: '2rem' }}>\n        <Button onClick={onCancel} type=\"button\">Cancelar</Button>\n        <Button type=\"submit\">{mode === 'editar' ? 'Actualizar' : 'Guardar'}</Button>\n      </div>\n    </form>\n  );\n}\n\nexport default ProductForm;\n","import React, { useState } from 'react';\nimport Button from './Button';\nimport ProductForm from './ProductForm';\nimport { useProductsInfinite } from '../hooks/useProductsInfinite';\n\nfunction ProductManager() {\n  const [search, setSearch] = useState('');\n  const [linea, setLinea] = useState('');\n  const [openCreateModal, setOpenCreateModal] = useState(false);\n  const [selectedProductId, setSelectedProductId] = useState(null);\n\n  const { products, loading, hasMore, lastProductRef } = useProductsInfinite({\n    search,\n    linea,\n    limit: 50,\n  });\n\n  const handleCreateSubmit = (data) => {\n    console.log('Producto creado o referencia guardada:', data);\n    setOpenCreateModal(false);\n  };\n\n  return (\n    <div style={{ padding: '2rem' }}>\n      <h1>Camilo Production System</h1>\n      <h2>Product Manager</h2>\n\n      <div style={{ display: 'flex', justifyContent: 'flex-end', gap: '1rem', marginBottom: '1rem' }}>\n        <Button onClick={() => setOpenCreateModal(true)}>\n          <span role=\"img\" aria-label=\"crear\">‚ûï</span> Crear Producto\n        </Button>\n        <Button\n          onClick={() => alert('Abrir modal para crear referencia')}\n          disabled={!selectedProductId}\n          title={!selectedProductId ? 'Selecciona un producto para agregar una referencia' : ''}\n        >\n          <span role=\"img\" aria-label=\"referencia\">üîó</span> Agregar Referencia\n        </Button>\n      </div>\n\n      <div style={{ marginBottom: '1rem' }}>\n        <input\n          type=\"text\"\n          placeholder=\"Buscar por nombre, c√≥digo o categor√≠a...\"\n          value={search}\n          onChange={(e) => setSearch(e.target.value)}\n          style={{\n            padding: '0.5rem 1rem',\n            fontSize: '1rem',\n            borderRadius: '8px',\n            border: '1px solid #ccc',\n            width: '100%',\n            maxWidth: '400px',\n            marginBottom: '1rem'\n          }}\n        />\n        <input\n          type=\"text\"\n          placeholder=\"Filtrar por l√≠nea\"\n          value={linea}\n          onChange={(e) => setLinea(e.target.value)}\n          style={{\n            padding: '0.5rem 1rem',\n            fontSize: '1rem',\n            borderRadius: '8px',\n            border: '1px solid #ccc',\n            width: '100%',\n            maxWidth: '400px'\n          }}\n        />\n      </div>\n\n      <div style={{\n        display: 'grid',\n        gridTemplateColumns: 'repeat(auto-fill, minmax(300px, 1fr))',\n        gap: '1.5rem'\n      }}>\n        {products.map((product, index) => {\n          const isLast = index === products.length - 1;\n          return (\n            <div\n              key={product.crce7_t_productosid || index}\n              ref={isLast ? lastProductRef : null}\n              onClick={() => setSelectedProductId(product.crce7_t_productosid)}\n              style={{\n                border: selectedProductId === product.crce7_t_productosid ? '2px solid #007bff' : '1px solid #ddd',\n                borderRadius: '12px',\n                padding: '1rem',\n                boxShadow: '0 2px 6px rgba(0,0,0,0.1)',\n                cursor: 'pointer',\n                backgroundColor: selectedProductId === product.crce7_t_productosid ? '#f0f8ff' : 'white'\n              }}\n            >\n              <h3 style={{ margin: '0.5rem 0 0.25rem' }}>{product.crce7_nombre_}</h3>\n              <p style={{ margin: '0.25rem 0', color: '#888' }}>\n                C√≥digo: <strong>{product.crce7_codigo}</strong>\n              </p>\n              <p style={{ fontWeight: 'bold', fontSize: '1rem', marginTop: '0.5rem' }}>\n                Precio: ${product.crce7_precio_unitario?.toFixed(2) || 'N/A'}\n              </p>\n            </div>\n          );\n        })}\n      </div>\n\n      {loading && (\n        <div style={{ textAlign: 'center', margin: '2rem' }}>\n          <div className=\"spinner\" style={{\n            border: '6px solid #f3f3f3',\n            borderTop: '6px solid #007bff',\n            borderRadius: '50%',\n            width: '50px',\n            height: '50px',\n            animation: 'spin 1s linear infinite',\n            margin: 'auto'\n          }} />\n        </div>\n      )}\n      {!hasMore && !loading && products.length === 0 && (\n        <div style={{ textAlign: 'center', color: '#888', fontSize: '1.1rem' }}>\n          No se encontraron productos para mostrar.\n        </div>\n      )}\n\n      {openCreateModal && (\n        <div style={{\n          position: 'fixed',\n          top: 0, left: 0, right: 0, bottom: 0,\n          backgroundColor: 'rgba(0, 0, 0, 0.5)',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          zIndex: 1000\n        }}>\n          <div style={{\n            backgroundColor: 'white',\n            padding: '2rem',\n            borderRadius: '12px',\n            maxWidth: '600px',\n            width: '90%',\n            boxShadow: '0 4px 10px rgba(0,0,0,0.25)'\n          }}>\n            <h2 style={{ marginBottom: '1rem' }}>Crear Nuevo Producto</h2>\n            <ProductForm mode=\"crear\" onCancel={() => setOpenCreateModal(false)} onSubmit={handleCreateSubmit} />\n          </div>\n        </div>\n      )}\n\n      <style>{`\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n      `}</style>\n    </div>\n  );\n}\n\nexport default ProductManager;\n","\n\nimport { useEffect, useRef, useState, useCallback } from 'react';\n\nexport function useProductsInfinite({ search = '', linea = '', limit = 50 }) {\n  const [products, setProducts] = useState([]);\n  const [page, setPage] = useState(1);\n  const [loading, setLoading] = useState(false);\n  const [hasMore, setHasMore] = useState(true);\n  const observer = useRef();\n\n  const lastProductRef = useCallback(\n    (node) => {\n      if (loading) return;\n      if (observer.current) observer.current.disconnect();\n\n      observer.current = new IntersectionObserver((entries) => {\n        if (entries[0].isIntersecting && hasMore) {\n          setPage((prevPage) => prevPage + 1);\n        }\n      });\n\n      if (node) observer.current.observe(node);\n    },\n    [loading, hasMore]\n  );\n\n  useEffect(() => {\n    setProducts([]);\n    setPage(1);\n    setHasMore(true);\n  }, [search, linea]);\n\n  useEffect(() => {\n    setLoading(true);\n    fetch(\n      `/api/products/paginated?search=${encodeURIComponent(search)}&linea=${encodeURIComponent(\n        linea\n      )}&page=${page}&limit=${limit}`\n    )\n      .then((res) => res.json())\n      .then((data) => {\n        setProducts((prev) => [...prev, ...data.data]);\n        setHasMore(data.data.length === limit);\n        setLoading(false);\n      })\n      .catch((error) => {\n        console.error('‚ùå Error al cargar productos:', error);\n        setLoading(false);\n      });\n  }, [page, search, linea, limit]);\n\n  return { products, loading, hasMore, lastProductRef };\n}","\nimport React from 'react';\nimport ProductManager from './components/ProductManager';\n\nfunction App() {\n  return (\n    <div>\n      <h1>Camilo Production System</h1>\n      <ProductManager />\n    </div>\n  );\n}\n\nexport default App; \n","\nimport React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(<App />);\n"],"sourceRoot":""}